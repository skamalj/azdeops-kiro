{
  "name": "azure-devops-integration",
  "displayName": "Azure DevOps Integration",
  "description": "Kiro extension for Azure DevOps integration with intelligent task completion",
  "version": "1.0.0",

  "publisher": "kiro",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/kiro/azure-devops-integration.git"
  },
  "engines": {
    "vscode": "^1.103.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [
    "onCommand:azureDevOps.connect",
    "onCommand:azureDevOps.createUserStory",
    "onCommand:azureDevOps.createTask",
    "onView:azureDevOpsExplorer"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "azureDevOps.connect",
        "title": "Connect to Organization",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.disconnect",
        "title": "Disconnect",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.selectTask",
        "title": "Select Active Task",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.completeTask",
        "title": "Complete Current Task",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.createUserStory",
        "title": "Create User Story",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.createTask",
        "title": "Create Task",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.syncWorkItems",
        "title": "Sync Work Items",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.showMyTasks",
        "title": "Show My Tasks",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.searchWorkItems",
        "title": "Search Work Items",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.refreshExplorer",
        "title": "Refresh",
        "icon": "$(refresh)"
      },
      {
        "command": "azureDevOps.configurePAT",
        "title": "Configure Personal Access Token",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.testCreateStory",
        "title": "Test: Create Sample Story",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.diagnostics",
        "title": "Run Diagnostics",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.test",
        "title": "Test Extension",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.selectProject",
        "title": "Select Project",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.createTestCase",
        "title": "Create Test Case",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.createTestPlan",
        "title": "Create Test Plan",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.executeTestCase",
        "title": "Execute Test Case",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.showScrumDashboard",
        "title": "Show Scrum Dashboard",
        "category": "Azure DevOps"
      },
      {
        "command": "azureDevOps.selectProjectFromTree",
        "title": "Select Project",
        "category": "Azure DevOps"
      }
    ],
    "views": {
      "azureDevOps": [
        {
          "id": "azureDevOpsExplorer",
          "name": "Work Items"
        },
        {
          "id": "azureDevOpsConnection",
          "name": "Connection"
        }
      ]
    },
    "viewsContainers": {
      "activitybar": [
        {
          "id": "azureDevOps",
          "title": "Azure DevOps",
          "icon": "$(organization)"
        }
      ]
    },
    "menus": {
      "view/title": [
        {
          "command": "azureDevOps.refreshExplorer",
          "when": "view == azureDevOpsExplorer",
          "group": "navigation"
        }
      ],
      "view/item/context": [
        {
          "command": "azureDevOps.selectProjectFromTree",
          "when": "view == azureDevOpsExplorer && viewItem == project",
          "group": "inline"
        },
        {
          "command": "azureDevOps.executeTestCase",
          "when": "view == azureDevOpsExplorer && viewItem == testcase",
          "group": "inline"
        },
        {
          "command": "azureDevOps.startTask",
          "when": "view == azureDevOpsExplorer && viewItem == task",
          "group": "1_actions"
        },
        {
          "command": "azureDevOps.editTask",
          "when": "view == azureDevOpsExplorer && viewItem == task",
          "group": "1_actions"
        },
        {
          "command": "azureDevOps.viewTask",
          "when": "view == azureDevOpsExplorer && (viewItem == task || viewItem == userstory)",
          "group": "2_view"
        }
      ],
      "commandPalette": [
        {
          "command": "azureDevOps.connect",
          "when": "!azureDevOps.connected"
        },
        {
          "command": "azureDevOps.disconnect",
          "when": "azureDevOps.connected"
        },
        {
          "command": "azureDevOps.selectTask",
          "when": "azureDevOps.connected"
        },
        {
          "command": "azureDevOps.completeTask",
          "when": "azureDevOps.connected && azureDevOps.hasActiveTask"
        },
        {
          "command": "azureDevOps.selectProjectFromTree",
          "when": "false"
        }
      ]
    },
    "configuration": {
      "title": "Azure DevOps Integration",
      "properties": {
        "azureDevOps.organizationUrl": {
          "type": "string",
          "description": "Azure DevOps organization URL (e.g., https://dev.azure.com/yourorg)",
          "pattern": "^https://(dev\\.azure\\.com/[a-zA-Z0-9-]+|[a-zA-Z0-9-]+\\.visualstudio\\.com)$",
          "patternErrorMessage": "Must be a valid Azure DevOps URL",
          "order": 1,
          "scope": "application"
        },
        "azureDevOps.projectName": {
          "type": "string",
          "description": "Default project name",
          "order": 2,
          "scope": "application"
        },
        "azureDevOps.personalAccessToken": {
          "type": "string",
          "description": "Personal Access Token for Azure DevOps authentication",
          "markdownDescription": "Personal Access Token with 'Work Items (Read & Write)' permissions. [Get PAT](https://docs.microsoft.com/en-us/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate)",
          "order": 3,
          "scope": "application"
        },
        "azureDevOps.autoSync": {
          "type": "boolean",
          "default": true,
          "description": "Automatically sync work items"
        },
        "azureDevOps.syncInterval": {
          "type": "number",
          "default": 300,
          "description": "Sync interval in seconds",
          "minimum": 60,
          "maximum": 3600
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run compile && npm run bundle-mcp",
    "compile": "tsc -p ./",
    "bundle-mcp": "npm run install-mcp-deps && npm run copy-mcp-server",
    "install-mcp-deps": "cd ../mcp-server && npm install",
    "copy-mcp-server": "if not exist mcp-server mkdir mcp-server && xcopy /E /Y ..\\mcp-server\\* mcp-server\\",
    "watch": "tsc -watch -p ./",
    "pretest": "npm run compile && npm run lint",
    "lint": "eslint src --ext ts",
    "test": "jest",
    "test:coverage": "jest --coverage",
    "build": "tsc",
    "dev": "tsc --watch"
  },
  "devDependencies": {
    "@types/jest": "^29.5.0",
    "@types/node": "^18.15.0",
    "@types/vscode": "^1.103.0",
    "@typescript-eslint/eslint-plugin": "^5.57.0",
    "@typescript-eslint/parser": "^5.57.0",
    "@vscode/vsce": "^3.7.1",
    "eslint": "^8.37.0",
    "fast-check": "^3.8.0",
    "jest": "^29.5.0",
    "ts-jest": "^29.1.0",
    "typescript": "^5.0.0"
  },
  "dependencies": {
    "axios": "^1.3.0"
  }
}
